<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Macrame Tutorial Organizer</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // Lucide React icons as inline SVG components
    const Plus = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    );

    const Trash2 = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        <line x1="10" y1="11" x2="10" y2="17"></line>
        <line x1="14" y1="11" x2="14" y2="17"></line>
      </svg>
    );

    const Edit2 = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
      </svg>
    );

    const Save = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
        <polyline points="17 21 17 13 7 13 7 21"></polyline>
        <polyline points="7 3 7 8 15 8"></polyline>
      </svg>
    );

    const X = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );

    const ExternalLink = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
        <polyline points="15 3 21 3 21 9"></polyline>
        <line x1="10" y1="14" x2="21" y2="3"></line>
      </svg>
    );

    const Download = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
    );

    const Upload = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="17 8 12 3 7 8"></polyline>
        <line x1="12" y1="3" x2="12" y2="15"></line>
      </svg>
    );

    function MacrameOrganizer() {
      const [tutorials, setTutorials] = useState([]);
      const [showForm, setShowForm] = useState(false);
      const [editingId, setEditingId] = useState(null);
      const [formData, setFormData] = useState({
        title: '',
        url: '',
        notes: ''
      });

      useEffect(() => {
        try {
          const saved = localStorage.getItem('macrame-tutorials');
          if (saved) {
            setTutorials(JSON.parse(saved));
          }
        } catch (error) {
          console.log('No saved tutorials yet');
        }
      }, []);

      useEffect(() => {
        try {
          localStorage.setItem('macrame-tutorials', JSON.stringify(tutorials));
        } catch (error) {
          console.error('Failed to save tutorials:', error);
        }
      }, [tutorials]);

      const extractVideoId = (url) => {
        const patterns = [
          /(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/,
          /youtube\.com\/embed\/([^&\n?#]+)/,
          /youtube\.com\/v\/([^&\n?#]+)/
        ];
        
        for (const pattern of patterns) {
          const match = url.match(pattern);
          if (match) return match[1];
        }
        return null;
      };

      const getThumbnailUrl = (url) => {
        const videoId = extractVideoId(url);
        return videoId ? `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg` : null;
      };

      const handleSubmit = () => {
        if (!formData.title || !formData.url) return;
        
        const thumbnail = getThumbnailUrl(formData.url);
        
        if (editingId) {
          setTutorials(tutorials.map(t => 
            t.id === editingId ? { ...formData, thumbnail, id: editingId } : t
          ));
          setEditingId(null);
        } else {
          const newTutorial = {
            ...formData,
            thumbnail,
            id: Date.now().toString()
          };
          setTutorials([...tutorials, newTutorial]);
        }
        
        setFormData({ title: '', url: '', notes: '' });
        setShowForm(false);
      };

      const handleEdit = (tutorial) => {
        setFormData({ title: tutorial.title, url: tutorial.url, notes: tutorial.notes });
        setEditingId(tutorial.id);
        setShowForm(true);
      };

      const handleDelete = (id) => {
        setTutorials(tutorials.filter(t => t.id !== id));
      };

      const handleCancel = () => {
        setFormData({ title: '', url: '', notes: '' });
        setEditingId(null);
        setShowForm(false);
      };

      const handleExport = () => {
        const dataStr = JSON.stringify(tutorials, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `macrame-tutorials-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      };

      const handleImport = (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (event) => {
          try {
            const importedTutorials = JSON.parse(event.target.result);
            if (Array.isArray(importedTutorials)) {
              setTutorials(importedTutorials);
              alert(`Successfully imported ${importedTutorials.length} tutorial(s)!`);
            } else {
              alert('Invalid file format. Please select a valid tutorial backup file.');
            }
          } catch (error) {
            alert('Error reading file. Please make sure it\'s a valid JSON file.');
          }
        };
        reader.readAsText(file);
        e.target.value = '';
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white p-6">
          <div className="max-w-6xl mx-auto">
            <div className="flex justify-between items-center mb-8 flex-wrap gap-4">
              <div>
                <h1 className="text-4xl font-sans text-green-400 mb-2">Macrame Tutorials</h1>
                <p className="text-gray-400 text-sm">Organize and bookmark your favorite projects</p>
              </div>
              <div className="flex gap-3 flex-wrap">
                {tutorials.length > 0 && (
                  <>
                    <button
                      onClick={handleExport}
                      className="flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 px-4 py-3 rounded-lg transition shadow-lg"
                      title="Export your tutorials"
                    >
                      <Download size={20} />
                      Export
                    </button>
                    <label className="flex items-center gap-2 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 px-4 py-3 rounded-lg transition shadow-lg cursor-pointer"
                      title="Import tutorials from file"
                    >
                      <Upload size={20} />
                      Import
                      <input
                        type="file"
                        accept=".json"
                        onChange={handleImport}
                        className="hidden"
                      />
                    </label>
                  </>
                )}
                <button
                  onClick={() => setShowForm(true)}
                  className="flex items-center gap-2 bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 px-5 py-3 rounded-lg transition shadow-lg"
                >
                  <Plus size={20} />
                  Add Tutorial
                </button>
              </div>
            </div>

            {showForm && (
              <div className="bg-gray-800 p-6 rounded-xl mb-8 border-2 border-green-500 shadow-2xl">
                <h2 className="text-2xl font-sans text-green-400 mb-6">
                  {editingId ? 'Edit Tutorial' : 'Add New Tutorial'}
                </h2>
                <div className="space-y-5">
                  <div>
                    <label className="block text-sm text-gray-300 mb-2 font-medium">Tutorial Title</label>
                    <input
                      type="text"
                      value={formData.title}
                      onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                      className="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-green-400 focus:ring-2 focus:ring-green-400/30 transition text-white"
                      placeholder="e.g., Basic Square Knot Pattern"
                    />
                  </div>
                  <div>
                    <label className="block text-sm text-gray-300 mb-2 font-medium">YouTube URL</label>
                    <input
                      type="url"
                      value={formData.url}
                      onChange={(e) => setFormData({ ...formData, url: e.target.value })}
                      className="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-green-400 focus:ring-2 focus:ring-green-400/30 transition text-white"
                      placeholder="https://www.youtube.com/watch?v=..."
                    />
                    <p className="text-xs text-gray-500 mt-1">Thumbnail will be generated automatically</p>
                  </div>
                  <div>
                    <label className="block text-sm text-gray-300 mb-2 font-medium">Notes</label>
                    <textarea
                      value={formData.notes}
                      onChange={(e) => setFormData({ ...formData, notes: e.target.value })}
                      className="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 h-32 focus:outline-none focus:border-green-400 focus:ring-2 focus:ring-green-400/30 transition resize-none text-white"
                      placeholder="Materials needed, difficulty level, tips..."
                    />
                  </div>
                  <div className="flex gap-3 pt-2">
                    <button
                      onClick={handleSubmit}
                      className="flex items-center gap-2 bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 px-5 py-2 rounded-lg transition shadow-lg"
                    >
                      <Save size={18} />
                      {editingId ? 'Update' : 'Save'}
                    </button>
                    <button
                      onClick={handleCancel}
                      className="flex items-center gap-2 bg-gray-700 hover:bg-gray-600 px-5 py-2 rounded-lg transition"
                    >
                      <X size={18} />
                      Cancel
                    </button>
                  </div>
                </div>
              </div>
            )}

            {tutorials.length === 0 ? (
              <div className="text-center text-gray-400 py-20 bg-gray-800/50 rounded-xl border border-gray-700">
                <p className="text-xl mb-2">No tutorials saved yet</p>
                <p className="text-sm">Click "Add Tutorial" to start your collection</p>
              </div>
            ) : (
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {tutorials.map((tutorial) => (
                  <div key={tutorial.id} className="bg-gradient-to-br from-gray-700 to-gray-800 rounded-xl overflow-hidden border border-gray-600 hover:border-green-400 hover:shadow-xl hover:shadow-green-500/20 transition-all duration-300">
                    {tutorial.thumbnail && (
                      <div className="relative">
                        <img
                          src={tutorial.thumbnail}
                          alt={tutorial.title}
                          className="w-full h-48 object-cover"
                          onError={(e) => {
                            e.target.style.display = 'none';
                            e.target.parentElement.style.display = 'none';
                          }}
                        />
                        <div className="absolute inset-0 bg-gradient-to-t from-gray-800 to-transparent opacity-60"></div>
                      </div>
                    )}
                    <div className="p-5">
                      <h3 className="text-xl font-sans text-green-400 mb-3 font-medium">{tutorial.title}</h3>
                      {tutorial.notes && (
                        <p className="text-gray-300 text-sm mb-4 line-clamp-3 leading-relaxed">{tutorial.notes}</p>
                      )}
                      <div className="flex gap-2 mt-4">
                        <a
                          href={tutorial.url}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="flex-1 bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 px-4 py-2 rounded-lg text-center text-sm transition shadow-md flex items-center justify-center gap-2"
                        >
                          <ExternalLink size={14} />
                          Watch
                        </a>
                        <button
                          onClick={() => handleEdit(tutorial)}
                          className="bg-gray-600 hover:bg-gray-500 px-3 py-2 rounded-lg transition"
                          title="Edit"
                        >
                          <Edit2 size={16} />
                        </button>
                        <button
                          onClick={() => handleDelete(tutorial.id)}
                          className="bg-red-800 hover:bg-red-700 px-3 py-2 rounded-lg transition"
                          title="Delete"
                        >
                          <Trash2 size={16} />
                        </button>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.render(<MacrameOrganizer />, document.getElementById('root'));
  </script>
</body>
</html>
